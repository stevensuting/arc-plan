window.ToolbarConfigurator={},function(){function a(){this.instanceid="fte"+CKEDITOR.tools.getNextId(),this.textarea=new CKEDITOR.dom.element("textarea"),this.textarea.setAttributes({id:this.instanceid,name:this.instanceid,contentEditable:!0}),this.editorInstance=this.buttons=null}ToolbarConfigurator.FullToolbarEditor=a,a.prototype.init=function(b){var c=this;document.body.appendChild(this.textarea.$),CKEDITOR.replace(this.instanceid),this.editorInstance=CKEDITOR.instances[this.instanceid],this.editorInstance.once("configLoaded",function(d){var f=d.editor.config;delete f.removeButtons,delete f.toolbarGroups,delete f.toolbar,ToolbarConfigurator.AbstractToolbarModifier.extendPluginsConfig(f),d.editor.once("loaded",function(){c.buttons=a.toolbarToButtons(c.editorInstance.toolbar),c.buttonsByGroup=a.groupButtons(c.buttons),c.buttonNamesByGroup=c.groupButtonNamesByGroup(c.buttons),d.editor.container.hide(),"function"==typeof b&&b(c.buttons)})})},a.prototype.groupButtonNamesByGroup=function(b){var c=this;b=a.groupButtons(b);for(var d in b)b[d]=a.map(b[d],function(a){return c.getCamelCasedButtonName(a.name)});return b},a.prototype.getGroupByName=function(a){for(var b=this.editorInstance.config.toolbarGroups||this.getFullToolbarGroupsConfig(),c=b.length,d=0;d<c;d+=1)if(b[d].name===a)return b[d];return null},a.prototype.getCamelCasedButtonName=function(a){var b=this.editorInstance.ui.items,c;for(c in b)if(b[c].name==a)return c;return null},a.prototype.getFullToolbarGroupsConfig=function(a){a=!0===a?!0:!1;for(var b=[],c=this.editorInstance.toolbar,d=c.length,e=0;e<d;e+=1){var f=c[e],g={};"string"!=typeof f.name?a&&b.push("/"):(g.name=f.name,f.groups&&(g.groups=Array.prototype.slice.call(f.groups)),b.push(g))}return b},a.filter=function(a,b){for(var c=a&&a.length?a.length:0,d=[],e=0;e<c;e+=1)b(a[e])&&d.push(a[e]);return d},a.map=function(a,b){var c;if(CKEDITOR.tools.isArray(a)){c=[];for(var d=a.length,e=0;e<d;e+=1)c.push(b(a[e]))}else for(d in c={},a)c[d]=b(a[d]);return c},a.groupButtons=function(a){for(var b={},c=a.length,d=0;d<c;d+=1){var e=a[d],f=e.toolbar.split(",")[0];b[f]=b[f]||[],b[f].push(e)}return b},a.toolbarToButtons=function(b){for(var c=[],d=b.length,f=0;f<d;f+=1)"object"==typeof b[f]&&(c=c.concat(a.groupToButtons(b[f])));return c},a.createToolbarButton=function(b){var c=new CKEDITOR.dom.element("a"),d=a.createIcon(b.name,b.icon,b.command);c.setStyle("float","none"),c.addClass("cke_"+("rtl"==CKEDITOR.lang.dir?"rtl":"ltr"));if(b instanceof CKEDITOR.ui.button)c.addClass("cke_button"),c.addClass("cke_toolgroup"),c.append(d);else if(CKEDITOR.ui.richCombo&&b instanceof CKEDITOR.ui.richCombo){var d=new CKEDITOR.dom.element("span"),f=new CKEDITOR.dom.element("span"),g=new CKEDITOR.dom.element("span");c.addClass("cke_combo_button"),d.addClass("cke_combo_text"),d.addClass("cke_combo_inlinelabel"),d.setText(b.label),f.addClass("cke_combo_open"),g.addClass("cke_combo_arrow"),f.append(g),c.append(d),c.append(f)}return c},a.createIcon=function(a,b,c){var d=CKEDITOR.skin.getIconStyle(a,"rtl"==CKEDITOR.lang.dir),d=(d=d||CKEDITOR.skin.getIconStyle(b,"rtl"==CKEDITOR.lang.dir))||CKEDITOR.skin.getIconStyle(c,"rtl"==CKEDITOR.lang.dir);return b=new CKEDITOR.dom.element("span"),b.addClass("cke_button_icon"),b.addClass("cke_button__"+a+"_icon"),b.setAttribute("style",d),b.setStyle("float","none"),b},a.createButton=function(a,b){var c=new CKEDITOR.dom.element("button");c.addClass("button-a"),c.setAttribute("type","button");if("string"==typeof b){b=b.split(" ");for(var d=b.length;d--;)c.addClass(b[d])}return c.setHtml(a),c},a.groupToButtons=function(b){for(var c=[],d=(b=b.items)?b.length:0,f=0;f<d;f+=1){var g=b[f];if(g instanceof CKEDITOR.ui.button||CKEDITOR.ui.richCombo&&g instanceof CKEDITOR.ui.richCombo)g.$=a.createToolbarButton(g),c.push(g)}return c}}()